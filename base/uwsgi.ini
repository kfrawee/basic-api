[uwsgi]
# General Settings
master = true
strict = true
need-app = true

# Project Settings
chdir = /home/ubuntu/basic-api/
module = base.wsgi
home = /home/ubuntu/basic-api/.venv

# Process Management
processes = 1
threads = 2

# Logging
daemonize = /home/ubuntu/basic-api/uwsgi.log
log-maxsize = 10485760  # Rotate log when it reaches 10MB

# Socket Configuration
http-socket = 127.0.0.1:8000
vacuum = true

# Memory Management
limit-as = 512
reload-on-rss = 128  # Restart worker if it exceeds 128MB RSS memory

# Additional Settings
enable-threads = true
thunder-lock = true
buffer-size = 65535

# Graceful Shutdown
worker-reload-mercy = 60
die-on-term = true

# Touch file to trigger graceful reload
touch-chain-reload = /tmp/uwsgi.reload
